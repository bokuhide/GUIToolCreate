%% 論文

%% プリアンブル %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\documentclass{kut-paper}			%% jis フォントを使用する場合
\documentclass[mingoth]{kut-paper}		%% 通常フォントを使用する場合
%\documentclass[twoside]{kut-paper}		%% 両面印刷の場合

\usepackage{graphicx}
\usepackage{url}
\usepackage{here}

%% 表紙 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ScInfo                         %% 情報学群の場合に追加する．それ以外の場合はコメントアウト

\Bachelor			%% 学士学位論文（卒業研究）の場合
%\Project			%% プロジェクト研究報告書の場合
%\Seminar			%% 特別研究セミナー課題研究報告書の場合
%\Master			%% 修士学位論文（情報システム工学コース）の場合
%\Doctorate			%% 博士学位論文（情報システム工学コース）の場合
%\English			%% 英語の場合（特別研究セミナーの場合は選択不可）
%\figurespagefalse		%% 図目次を出力しない場合
%\tablespagefalse		%% 表目次を出力しない場合

\years{平成27}
\title{OpenStack環境でのオーケストレーション定義を容易にするGUIエディタの実現}
\titlelength{19}		%% 表紙の表題の行長(全角文字数<20, default=19)
\Etitle{}
\idnumber{1160304}
\author{川口　貴大}
\Eauthor{}
\advisor{横山　和俊}
\date{2016/02/15}
\abstract{
	近年，ITリソースの迅速な確保，コスト削減等の目的からシステムの基盤としてIaaSの需要が高まっている．IaaSを用いたものに限らず，ITサービスにおけるシステム設計では冗長化や負荷分散，処理の効率化といった理由により，複数マシンの構成となる場合が多く見られる．しかし，システムの流用や再利用が求められる場面では、大規模なシステムになるにつれ、マシン台数も増加し設定に掛かる工程が増大してしまう。そのため、システム再現における作業の効率化が求められている。
	
	\texttt OpenStackは最も開発が進んでいるIaaS基盤ソフトウェアの一つであり、コミュニティには多くの有名企業が参加している。OpenStackではHeatと呼ばれるオーケストレーション（自動構築）機能を提供するソフトウェアにより、システムの再現を効率化している。HeatではITリソースの構成情報を記述した設計図(テンプレートファイル)を読み込ませることで、その構成情報を基に自動的にシステムの構築を行う。そのため、テンプレートファイルの作成はシステムを構築する上で重要な役割を担っている。しかし、テンプレートファイルは書式が複雑であり、記述を行う際にはHeat独自の知識を要する。また、テキストファイルであるため、記述量の増加によるミスや、構成情報がテキストからイメージし難いという問題も抱えている。
	
	\texttt 本研究ではGUIを用いオーケストレーション定義を行うことにより、従来のテキスト入力における問題点を解決する新規テンプレートファイル作成ツールの開発を行い，従来の方法に比べて短時間かつ容易に仮想環境を構築できることを示した．
	
}
\keyword{OpenStack，IaaS，Heat，オーケストレーション
}
\Eabstract{English
}				%% プロジェクト研究報告書の場合は不要
\Ekeyword{English
}				%% プロジェクト研究報告書の場合は不要

%% 本文 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\maketitle

\chapter{はじめに}
%\input{chpater1.tex}
	
	サーバー仮想化や通信ネットワークの技術進歩に伴い，クラウドコンピューティングが普及している．一般ユーザー向けに提供されるサービスや，企業内で利用される専用アプリケーションなど，多くのサービスがクラウドを用いて提供されており，クラウドコンピューティングにおいてIaaSの需要が高まっている．総務省が公開している「平成27年度版　情報通信白書」第５章第２節によると，図\ref{graf:1}に示す通り市場規模におけるIaaSの規模が，2018年時予測の段階で2012年時規模の約４倍にまで増加する．\cite{bib:1}そのため，今後更にIaaSの需要が高まると考えられる．
	\begin{figure}[H]
		\begin{center}
			\includegraphics[scale=0.8]{Document/2016IaaSDataGrafPhoto.eps}
			\caption{クラウドサービスの世界市場規模の推移及び予測}
			\label{graf:1}
		\end{center}
	\end{figure}
	
	IaaS(Infrastructure as a Service)とは，システムの稼働に必要なサーバー，ストレージ，ネットワークなどのインフラを，ネットワーク経由で提供するサービスのことである．\cite{bib:2}IaaSを提供する側は物理サーバーや物理ネットワークを仮想化しIaaS基盤を構築してサービスを提供する．IaaSを提供される側は，仮想化されたリソースを組み合わせシステムを構築，サービスを提供させることが可能となる．
	IaaSの代表的なサービスとして，「Amazon Web Services」や，「Microsoft Azure」等が挙げられる．これらのサービスは，提供しているベンダが１つであり，それぞれ独自仕様で開発されたIaaS基盤を用いている．
	
	\texttt それに対し，多くのベンダが参加するコミュニティで開発されているIaaS基盤構築ソフトウェアとしてOpenStackが存在する．\cite{bib:3}OpenStackはオープンソース・ソフトウェアとして開発されており，Amazon Web Service や Microsoft Azure　と違い独自仕様で開発されていない．コミュニティに参加している企業は，オープンソース・ソフトウェアとして開発されたOpenStackをベースとしてIaaSを提供している．今後，OpenStackをベースとして新たなベンダがIaaSを提供する毎に，利用者は複数のIaaSからどれを使用するか選ぶことが可能となる．
	
	\texttt OpenStackは，2010年10月に初期バージョンであるAustinがリリースされ，その後定期的に新しいバージョンを公開，2015年10月16日に最新バージョンのLibertyが公開されている．機能別にコンポーネントが分かれており，各コンポーネントが相互に連携して動作する．OpenStackの主要コンポーネントを表\ref{table:1}に示す．
	\begin{table}[H]
		\begin{center}
			\caption{OpenStackの主要コンポーネント}
			\label{table:1}
			\begin{tabular}{|c|c|}\hline
				コンポーネント & 機能\\ \hline \hline
	     		Glance & 仮想マシンで使用されるゲストOSの管理\\ \hline
				Cinder & ブロックストレージにてゲストOS等を永続管理\\ \hline
				Neutron & 仮想ネットワークの管理\\ \hline
				Horizon & OpenStackの操作管理を行うWebUIの提供\\ \hline
				Swift & オブジェクトストレージの提供\\ \hline
				Heat & 仮想環境構築のためのオーケストレーション機能の提供\\ \hline
			\end{tabular}
		\end{center}
	\end{table}
	Heatとは，本来OpenStack利用者が手動で，各コンポーネントに指示を出し行っている仮想環境構築の手順を自動化する機能を提供している．自動化の手順としては，各コンポーネントを実行するために必要な項目を「Heatテンプレートファイル（以降テンプレートファイルと呼ぶ）」に記述，テンプレートファイルを読み込むことで各コンポーネントで実行される内容を自動で実行し仮想環境を構築を行うというものである．尚，テンプレートファイルには独自の書式が存在する．
	
	\texttt OpenStackの各コンポーネントを自動化することができるHeatだが，現状問題が存在する．図\ref{table:2}に問題点を示す.
	
	\begin{table}[H]
		\begin{center}
			\caption{Heatの問題点}
			\label{table:2}
			\begin{tabular}{|p{5cm}|p{7cm}|}\hline
				問題点 & 詳細\\ \hline \hline
				Heatテンプレートファイルの書式が複雑 & 入力内容を把握しづらい.また,文中のインデントの深さで入力内容を区別するという特殊な書式もある.\\ \hline
				膨大なテキスト記述量 & 手動入力で仮想環境のシステム構成について記述するため,記述に膨大な時間がかかる.\\ \hline
				テンプレートファイルから構成情報を把握しづらい & 構成情報を全てテキストで記述しているため,一見して構築途中または構築完了後の構成をテンプレートファイルからは把握しづらい.\\ \hline
			\end{tabular}
		\end{center}
	\end{table}
% %	\begin{itemize}
	% %	\item Heatテンプレートファイルの複雑な書式
	% %	\begin{itemize}
		% %	\item 入力内容の不明確さ
		% %	\item インデントの深さによる入力項目区別
		% %\end{itemize}
		% %\item テキスト記述量
		% %\begin{itemize}
		% %	\item 新規項目追加毎に関連項目全てを追加入力
		% %\end{itemize}
		% %\item テンプレートファイルから構成情報を把握することの難しさ
		% %\begin{itemize}
		% %	\item 複雑な書式，膨大な量のテキスト記述量から一見して構成を把握することが困難
		% %\end{itemize}
	% %\end{itemize}
% %	提示した問題点を解決するために，以下の解決案を提案する．
	% %\begin{itemize}
	% %	\item Heat専門知識の排除
	% % % %	\item 入力者側が細かな書式を気にしないで済むようなもの
	% %	\end{itemize}
	% %	\item 入力内容の明確化
	% %	\begin{itemize}
	% %		\item 何を入力すればよいのか項目名を追加
	% %	\end{itemize}
	% % 	\begin{itemize}
	% %		\item インスタンス名記述項目以外の項目で手動入力を撤廃，プルダウンメニューによる選択肢を提供
	% %	\end{itemize}
	% %	\item 構成情報の可視化
	% %	\begin{itemize}
	% %		\item 現在構築中の構成情報についてアイコンを用いて可視化
	% %	\end{itemize}
% %	\end{itemize}
	
	
\chapter{オーケストレーション定義エディタの提案}
%\input{chpater2.tex}
	\section{オーケストレーション定義エディタの概要}
		オーケストレーション定義エディタとは，従来手動で行っていたHeatテンプレートファイル作成をGUIベースで作成補助をすることによりテンプレートファイル作成にかかる時間を削減し，容易にHeatを用いた仮想環境構築を可能にするエディタである．オーケストレーション定義エディタの概略図を図\ref{graf:2}に示す．
		\vspace{-2mm}
		\begin{figure}[H]
			\begin{center}
				\includegraphics[scale=0.4]{Document/GUIEditorOverview.eps}
				\caption{オーケストレーション定義エディタの概略}
				\label{graf:2}
			\end{center}
		\end{figure}
	\section{オーケストレーション定義エディタの要件}
	オーケストレーション定義エディタで取り扱うHeatはOpenStack内のコンポーネントであるため利用者は最低限OpenStackに関する基本的な知識は必要である.それ以外の前提知識を有していなくとも利用者がスムーズに仮想環境を構築するために表\ref{table:3}にオーケストレーション定義エディタに求められる要件を定義した.
	\begin{table}[H]
		\begin{center}
			\caption{オーケストレーション定義エディタに求められる要件}
			\label{table:3}
			\begin{tabular}{|p{5cm}|p{7cm}|}\hline
				要件 & 理由\\ \hline \hline
				操作インターフェイスはGUI & 構築中のシステム構成を可視化するため\\ \hline
				利用対象者はOpenStackに関する基本的な知識を有したインフラエンジニア & HeatはOpenStack内のコンポーネントであり,Heatで扱える内容は仮想環境構築といったエンジニア向けのものであるため\\ \hline
				扱うシステム構成のネットワーク規模は１から３セグメント & (まだ理由がない)\\ \hline
				インスタンス名入力項目以外の手動入力方式を廃止 & テキスト入力量を削減し,テンプレートファイル作成にかかる時間を短縮するため\\ \hline
				入力項目の明確化 & 正しい内容を入力することで,テンプレートファイル読み込み時のエラーを抑止\\ \hline
			\end{tabular}
		\end{center}
	\end{table}
	\section{Heatで扱うリソース}
	オーケストレーション定義を行うHeatでは,複数個のリソースを取り扱っている.お互いに依存しあうリソースについて記述を行うことで仮想環境を構築する.
	
	\section{リソースの依存関係}
	Heatで取り扱うリソースはそれぞれ他のリソースに依存している.依存しているリソースを参照することで仮想環境を稼働させる.依存関係を表\ref{table:4}に示す.
	\begin{table}[H]
		\begin{center}
			\caption{リソースの依存関係}
			\label{table:4}
			\begin{tabular}{|p{5cm}|p{7cm}|}\hline
				リソース & 依存している他のリソース\\ \hline \hline
				ネットワーク及びサブネット & 外部へ接続する必要があるため,外部ネットワークを参照する.サブネットでは使用するIPアドレス範囲を指定.\\ \hline
				ルータ & 接続先を指定するためにネットワークを参照する.\\ \hline
				ルータインターフェイス & ネットワークとルータを接続している.どのネットワークが自身の依存するルータに接続されるのか管理している.\\ \hline
				インスタンス & 接続先を指定するためにネットワークを参照している.参照したネットワークに応じて,予めサブネットで範囲指定しておいたIPアドレスを割り振り,ルータを介して外部ネットワークへ接続できる.\\ \hline
			\end{tabular}
		\end{center}
	\end{table}
	(ここに、リソースの関係を表した図を貼り付ける)
	
	\texttt 
	構成上最も外側のネットワークを参照できるのは内部に存在するネットワークである.外のネットワークへの出口を確保することで,セグメント内から外部へネットワークを通じて接続できるようにしている.サブネットではセグメント内で使用するIPアドレスの幅を設定する.ここで設定されたIPアドレス範囲内にインスタンスを接続する.
	
	\texttt Heatでは,これらリソースの依存関係,参照先をテンプレートファイルへ記述,テンプレートを読み込むことで自動で仮想環境を構築する.
	\section{テンプレートファイルへの出力補助方法}
	仮想環境構築を補助するHeatだが,テンプレートファイル作成には多大な時間がかかり,更には記述の為にHeatに関する専門知識が必要であるため手軽に利用できない.そこでテンプレートファイル作成を容易にするため,オーケストレーション定義エディタではテンプレートファイルへの出力補助を行う.
	
	\texttt オーケストレーション定義エディタでは,ユーザに入力されたデータは一度「データ保管用Class」へ保管する.(図\ref{graf:3})このデータ保管用Classにはオーケストレーション定義エディタからであれば何度もアクセスと編集が可能である.そのため構築途中で,既に記述をした項目を修正することも容易である.入力された複数のデータをデータ保管用Classに保持し続けておき,テンプレートファイルへ出力を行う際にデータ保管用Classを呼び出し,Class内に保管されているデータをテンプレートファイルへ出力する.
	
	\begin{figure}[H]
		\begin{center}
			\includegraphics[scale=0.86]{Document/Source1.eps}
			\caption{データ保管用Class}
			\label{graf:3}
		\end{center}
	\end{figure}
	
\chapter{オーケストレーション定義エディタの実装}
	\section{動作環境}
	本研究で作成されたオーケストレーション定義エディタはプログラミング言語であるC\#を使用して作成されているので,動作には「Microsoft .NET Framework 4.6」環境が必要である.
	\section{画面構成}
	オーケストレーション定義エディタは大きく分けて2つの画面から構成されている.以下に画面構成を示す.
		\subsection{構成確認画面}
		
		\subsection{詳細入力画面}
	
	\section{テンプレートファイル出力の流れ}
		\subsection{インスタンスに関する記述}
		
		\subsection{ネットワークに関する記述}
		
\chapter{評価}
	\section{評価の目的}
	１章「はじめに」中で提示した「Heatの問題点」を解決できたか検証，従来方式との差を計測するために被験者の，各手法に関する前提知識の勉強時間,作成インスタンス数とルーター数の増加させての作成所要時間,テンプレートファイル読み込み時にチェックされる記述ミスによるエラー発生数を計測,従来方式とオーケストレーション定義エディタ使用時それぞれで同じシステム構成を構築してもらい比較する.
	\section{評価内容}
	従来方式,オーケストレーション定義エディタそれぞれでシステム構築をする場合に以下の表\ref{table:5}に示している評価要素についてデータを記録する.
	\begin{table}[H]
		\begin{center}
			\caption{評価要素}
			\label{table:5}
			\begin{tabular}{|p{5cm}|p{7cm}|}\hline
				評価要素 & 詳細\\ \hline \hline
				学習時間 & 各方式についての説明用ドキュメントを用いた学習時間\\ \hline
				作成所要時間 & 各方式それぞれテンプレートファイル作成開始からテンプレートファイルをエラー無しの状態で正常に読み込ませるまでに要した時間\\ \hline
				エラー発生回数 & テンプレートファイルをHeatに読み込ませた時にエラーが発生した回数.正常に読みこませられるまで修正したテンプレートファイルを読みこませ直し続けるのでその都度エラーが発生すれば増加する\\ \hline
			\end{tabular}
		\end{center}
	\end{table}
	\section{評価環境}
	本評価実験は,オーケストレーション定義エディタの動作環境を満たしている「Microsoft .NET Framework 4.6」環境で評価を行った.
	
	\texttt また,本評価実験で構築する仮想環境システム構成を以下に示す.
	\begin{description}
		\item [I．(1セグメント1インスタンス構成)]\mbox{}\\ 作成するネットワーク（ルーター）数は1，インスタンス数も1．
		\item [I\hspace{-1pt}I．(1セグメント3インスタンス構成)]\mbox{}\\ 作成するネットワーク（ルーター）数は1，インスタンス数は3．
		\item [I\hspace{-1pt}I\hspace{-1pt}I．(1セグメント5インスタンス構成)]\mbox{}\\ 作成するネットワーク（ルーター）数は1，インスタンス数は5．
		\item [I\hspace{-1pt}V．(2セグメント5インスタンス構成)]\mbox{}\\ 作成するネットワーク（ルーター）数は2，インスタンス数は5．
		\item [V．(3セグメント5インスタンス構成)]\mbox{}\\ 作成するネットワーク（ルーター）数は3，インスタンス数は5．
	%	\item instance数３つ,Router数１つ
	%	\item instance数５つ,Router数１つ
	%	\item instance数５つ,Router数２つ
	%	\item instance数５つ,Router数３つ
	\end{description}
	
	I，I\hspace{-1pt}I，I\hspace{-1pt}I\hspace{-1pt}I 3つの構成は単純にインスタンスの数のみを増加させ，残るI\hspace{-1pt}V，V のシステム構成は基本的な構成に関してはⅢと同じだが,作成するルーターの数（内部のネットワーク,サブネットの数）を増加させている.これは,インスタンスに関する記述のみを増加させた場合とルーターに関する記述を増加させた場合,記述増加量の差があるため双方の記述所要時間とエラー発生回数の増加幅やデータの動きに差が生まれると予測したためである.
	\section{結果}
	評価実験の結果,従来方式については図\ref{table:6},オーケストレーション定義エディタについては図\ref{table:7}を示す.
	\begin{table}[H]
		\begin{center}
			\caption{各評価要素の実験結果-従来方式}
			\label{table:6}
			\begin{tabular}{|p{3cm}|p{2cm}|p{2cm}|}\hline
				評価要素 & 最小値 & 最大値\\ \hline \hline
				学習時間 & 413(秒)　& 540(秒)\\ \hline
				作成所要時間 (I) & 685(秒) & 1328(秒)\\ \hline
				作成所要時間 (I\hspace{-1pt}I) & 531(秒) & 1560(秒)\\ \hline
				作成所要時間 (I\hspace{-1pt}I\hspace{-1pt}I) & 597(秒) & 931(秒)\\ \hline
				作成所要時間 (I\hspace{-1pt}V) & 525(秒) & 1258(秒)\\ \hline
				作成所要時間 (V) & 485(秒) & 1532(秒)\\ \hline
				エラー発生回数 (I) & 1(回) &  7(回)\\ \hline
				エラー発生回数 (I\hspace{-1pt}I) & 1(回) &  3(回)\\ \hline
				エラー発生回数 (I\hspace{-1pt}I\hspace{-1pt}I) & 0(回) &  5(回)\\ \hline
				エラー発生回数 (I\hspace{-1pt}V) & 0(回) &  7(回)\\ \hline
				エラー発生回数 (V) & 0(回) &  4(回)\\ \hline
			\end{tabular}
		\end{center}
	\end{table}
	
	\begin{table}[H]
		\begin{center}
			\caption{各評価要素の実験結果-オーケストレーション定義エディタ}
			\label{table:7}
			\begin{tabular}{|p{3cm}|p{2cm}|p{2cm}|}\hline
				評価要素 & 最小値 & 最大値\\ \hline \hline
				学習時間 & 72(秒)　& 180(秒)\\ \hline
				作成所要時間 (I) & 27(秒) & 71(秒)\\ \hline
				作成所要時間 (I\hspace{-1pt}I) & 87(秒) & 166(秒)\\ \hline
				作成所要時間 (I\hspace{-1pt}I\hspace{-1pt}I) & 105(秒) & 190(秒)\\ \hline
				作成所要時間 (I\hspace{-1pt}V) & 113(秒) & 228(秒)\\ \hline
				作成所要時間 (V) & 142(秒) & 229(秒)\\ \hline
				エラー発生回数 (I) & 0(回) &  0(回)\\ \hline
				エラー発生回数 (I\hspace{-1pt}I) & 0(回) &  0(回)\\ \hline
				エラー発生回数 (I\hspace{-1pt}I\hspace{-1pt}I) & 0(回) &  0(回)\\ \hline
				エラー発生回数 (I\hspace{-1pt}V) & 0(回) &  0(回)\\ \hline
				エラー発生回数 (V) & 0(回) &  0(回)\\ \hline
			\end{tabular}
		\end{center}
	\end{table}
	\section{考察}
	\begin{description}
		\item[学習時間について]\mbox{}\\ 従来方式，オーケストレーション定義エディタ双方の学習時間を比較すると，全ての被験者がオーケストレーション定義エディタについての学習時間が従来方式よりも短いことがわかる．これは，従来方式ではHeat専門知識について学習が必要だが，オーケストレーション定義エディタではOpenStackに関する基本知識さえあればその他の知識は必要なくシステム構築が可能なつくりであるためだと考えられる．
	\end{description}
\chapter{おわりに}
	\section{研究のまとめ}
	\section{今後の課題}
	

%% 謝辞 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{acknowledgement}
%\input{acknowledgement.tex}
\end{acknowledgement}

%% 参考文献 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{thebibliography}{99}
%\input{bibliography.tex}
\bibitem{bib:1}総務省　平成２７年度版 情報通信白書 第５章第２節「ICT産業のグローバルトレンド」 				\url{http://www.soumu.go.jp/johotsusintokei/whitepaper/ja/h27/pdf/index.html}
\bibitem{bib:2}IBMクラウド・コンピューティング:IaaSとは-Japan
\url{http://www.ibm.com/cloud-computing/jp/ja/what-is-iaas.html}
\bibitem{bib:3}OpenStack
\url{https://www.openstack.org}
\end{thebibliography}

%% 付録 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\appendix

\chapter{}
%\input{appendex1.tex}

\chapter{}
%\input{appendex2.tex}

\end{document}
